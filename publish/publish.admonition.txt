(function webpackUniversalModuleDefinition(root, factory) {
	if(typeof exports === 'object' && typeof module === 'object')
		module.exports = factory();
	else if(typeof define === 'function' && define.amd)
		define([], factory);
	else {
		var a = factory();
		for(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];
	}
})(self, function() {
return /******/ (() => { // webpackBootstrap
/******/ 	"use strict";
/******/ 	// The require scope
/******/ 	var __webpack_require__ = {};
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/************************************************************************/
var __webpack_exports__ = {};
__webpack_require__.r(__webpack_exports__);

function createEl(tag, t, e) {
    const i = document.createElement(tag);
    "string" == typeof t &&
        (t = {
            cls: t
        });
    const r = t || {}, o = r.cls, s = r.text, a = r.attr, l = r.title, c = r.value, u = r.type, h = e ? e : r.parent, p = r.prepend, d = r.href;
    return (o &&
        (Array.isArray(o)
            ? (i.className = o.join(" "))
            : (i.className = o)),
        s && (i.textContent = s),
        a &&
            Object.keys(a).forEach((t) => {
                const n = a[t];
                null !== n && i.setAttribute(t, String(n));
            }),
        l && (i.title = l),
        c &&
            (i instanceof HTMLInputElement ||
                i instanceof HTMLSelectElement ||
                i instanceof HTMLOptionElement) &&
            (i.value = c),
        /* u && i instanceof HTMLInputElement && (i.type = u), */
        u && i instanceof HTMLStyleElement && i.setAttribute("type", u),
        d &&
            (i instanceof HTMLAnchorElement || i instanceof HTMLLinkElement) &&
            (i.href = d),
        h && (p ? h.insertBefore(i, h.firstChild) : h.appendChild(i)),
        i);
}
//@ts-ignore-line
const createDiv = function (o, e) {
    return createEl("div", o, e);
};
Node.prototype.createDiv = function (o, cb) {
    return createDiv(o, this);
};
Node.prototype.createEl = function (tag, o, cb) {
    return createEl(tag, o, this);
};
Element.prototype.addClass = function (...args) {
    const e = [];
    for (let t = 0; t < args.length; t++)
        e[t] = args[t];
    this.addClasses(e);
};
Element.prototype.addClasses = function (e) {
    for (let t = 0; t < e.length; t++)
        this.classList.add(e[t]);
};
function getAdmonitionElement(type, title, icon, color, collapse, id) {
    var _a;
    let admonition, titleEl, attrs = {
        style: `--admonition-color: ${color};`
    };
    if (collapse && collapse != "none") {
        if (collapse === "open") {
            attrs.open = "open";
        }
        admonition = createEl("details", {
            cls: `admonition admonition-${type} admonition-plugin`,
            attr: attrs
        });
        titleEl = admonition.createEl("summary", {
            cls: `admonition-title ${!(title === null || title === void 0 ? void 0 : title.trim().length) ? "no-title" : ""}`
        });
    }
    else {
        admonition = createDiv({
            cls: `admonition admonition-${type} admonition-plugin`,
            attr: attrs
        });
        titleEl = admonition.createDiv({
            cls: `admonition-title ${!(title === null || title === void 0 ? void 0 : title.trim().length) ? "no-title" : ""}`
        });
    }
    if (id) {
        admonition.id = id;
    }
    if (title && title.trim().length) {
        /**
         * Title structure
         * <div|summary>.admonition-title
         *      <element>.admonition-title-content - Rendered Markdown top-level element (e.g. H1/2/3 etc, p)
         *          div.admonition-title-icon
         *              svg
         *          div.admonition-title-markdown - Container of rendered markdown
         *              ...rendered markdown children...
         */
        //get markdown
        const markdownHolder = createDiv();
        //MarkdownRenderer.renderMarkdown(title, markdownHolder, "", null);
        //admonition-title-content is first child of rendered markdown
        const admonitionTitleContent = 
        /* markdownHolder?.children[0]?.tagName === "P"
    ? createDiv()
    : markdownHolder.children[0] ??  */ createDiv();
        //get children of markdown element, then remove them
        const markdownElements = Array.from(((_a = markdownHolder.children[0]) === null || _a === void 0 ? void 0 : _a.childNodes) || []);
        admonitionTitleContent.innerHTML = "";
        admonitionTitleContent.addClass("admonition-title-content");
        //build icon element
        const iconEl = admonitionTitleContent.createDiv("admonition-title-icon");
        if (icon) {
            iconEl.innerHTML = icon;
        }
        //add markdown children back
        const admonitionTitleMarkdown = admonitionTitleContent.createDiv("admonition-title-markdown");
        admonitionTitleMarkdown.innerText = title;
        /* for (let i = 0; i < markdownElements.length; i++) {
            admonitionTitleMarkdown.appendChild(markdownElements[i]);
        } */
        titleEl.appendChild(admonitionTitleContent || createDiv());
    }
    //add them to title element
    if (collapse) {
        titleEl.createDiv("collapser").createDiv("handle");
    }
    return admonition;
}
function startsWithAny(str, needles) {
    for (let i = 0; i < needles.length; i++) {
        if (str.startsWith(needles[i])) {
            return i;
        }
    }
    return false;
}
function getParametersFromSource(type, src) {
    const keywordTokens = ["title:", "collapse:", "icon:", "color:"];
    const keywords = ["title", "collapse", "icon", "color"];
    let lines = src.split("\n");
    let skipLines = 0;
    let params = {};
    for (let i = 0; i < lines.length; i++) {
        let keywordIndex = startsWithAny(lines[i], keywordTokens);
        if (keywordIndex === false) {
            break;
        }
        let foundKeyword = keywords[keywordIndex];
        if (params[foundKeyword] !== undefined) {
            break;
        }
        params[foundKeyword] = lines[i]
            .substr(keywordTokens[keywordIndex].length)
            .trim();
        ++skipLines;
    }
    let { title = type[0].toUpperCase() + type.slice(1).toLowerCase(), collapse, icon, color } = params;
    let content = lines.slice(skipLines).join("\n");
    /**
     * If the admonition should collapse, but something other than open or closed was provided, set to closed.
     */
    if (collapse !== undefined &&
        collapse !== "none" &&
        collapse !== "open" &&
        collapse !== "closed") {
        collapse = "closed";
    }
    /**
     * If the admonition should collapse, but title was blanked, set the default title.
     */
    if (title.trim() === "" && collapse !== undefined && collapse !== "none") {
        title = type[0].toUpperCase() + type.slice(1).toLowerCase();
        return;
    }
    return { title, collapse, content, icon, color };
}
const ADMONITION_ICON_MAP = {};
document.addEventListener("DOMContentLoaded", function (event) {
    //do work
    const admonitions = document.querySelectorAll("pre[class^='language-ad']");
    if (!admonitions.length)
        return;
    for (let admonitionBlock of Array.from(admonitions)) {
        const [, type] = admonitionBlock.classList.toString().match(/language-ad-(\w+)/);
        if (!type)
            continue;
        if (!(type in ADMONITION_ICON_MAP))
            continue;
        let { title = type[0].toUpperCase() + type.slice(1).toLowerCase(), collapse, content, icon = ADMONITION_ICON_MAP[type].icon, color = ADMONITION_ICON_MAP[type].color, } = getParametersFromSource(type, admonitionBlock.innerText);
        let admonition = getAdmonitionElement(type, title, icon, color, collapse);
        const contentHolder = admonition.createDiv("admonition-content-holder");
        const admonitionContent = contentHolder.createDiv("admonition-content");
        admonitionContent.innerText = content;
        admonitionBlock.replaceWith(admonition);
    }
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicHVibGlzaC5hZG1vbml0aW9uLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsicHVibGlzaC5hZG1vbml0aW9uLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUNBLE9BQU8sb0JBQW9CLENBQUM7QUErQjVCLFNBQVMsUUFBUSxDQUNiLEdBQU0sRUFDTixDQUEyQixFQUMzQixDQUFlO0lBRWYsTUFBTSxDQUFDLEdBQUcsUUFBUSxDQUFDLGFBQWEsQ0FBQyxHQUFHLENBQUMsQ0FBQztJQUN0QyxRQUFRLElBQUksT0FBTyxDQUFDO1FBQ2hCLENBQUMsQ0FBQyxHQUFHO1lBQ0QsR0FBRyxFQUFFLENBQUM7U0FDVCxDQUFDLENBQUM7SUFDUCxNQUFNLENBQUMsR0FBRyxDQUFDLElBQUksRUFBRSxFQUNiLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxFQUNULENBQUMsR0FBRyxDQUFDLENBQUMsSUFBSSxFQUNWLENBQUMsR0FBRyxDQUFDLENBQUMsSUFBSSxFQUNWLENBQUMsR0FBRyxDQUFDLENBQUMsS0FBSyxFQUNYLENBQUMsR0FBRyxDQUFDLENBQUMsS0FBSyxFQUNYLENBQUMsR0FBRyxDQUFDLENBQUMsSUFBSSxFQUNWLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLE1BQU0sRUFDcEIsQ0FBQyxHQUFHLENBQUMsQ0FBQyxPQUFPLEVBQ2IsQ0FBQyxHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUM7SUFDZixPQUFPLENBQ0gsQ0FBQztRQUNHLENBQUMsS0FBSyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUM7WUFDYixDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsU0FBUyxHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUM7WUFDN0IsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLFNBQVMsR0FBRyxDQUFDLENBQUMsQ0FBQztRQUM1QixDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMs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Q0FBQyxHQUFHLGVBQWUsQ0FBQyxTQUFTLENBQUMsUUFBUSxFQUFFLENBQUMsS0FBSyxDQUFDLG1CQUFtQixDQUFDLENBQUM7UUFDakYsSUFBSSxDQUFDLElBQUk7WUFBRSxTQUFTO1FBQ3BCLElBQUksQ0FBQyxDQUFDLElBQUksSUFBSSxtQkFBbUIsQ0FBQztZQUFFLFNBQVM7UUFFN0MsSUFBSSxFQUNBLEtBQUssR0FBRyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsV0FBVyxFQUFFLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxXQUFXLEVBQUUsRUFDM0QsUUFBUSxFQUNSLE9BQU8sRUFDUCxJQUFJLEdBQUcsbUJBQW1CLENBQUMsSUFBSSxDQUFDLENBQUMsSUFBSSxFQUNyQyxLQUFLLEdBQUcsbUJBQW1CLENBQUMsSUFBSSxDQUFDLENBQUMsS0FBSyxHQUMxQyxHQUFHLHVCQUF1QixDQUFDLElBQUksRUFBRSxlQUFlLENBQUMsU0FBUyxDQUFDLENBQUM7UUFFN0QsSUFBSSxVQUFVLEdBQUcsb0JBQW9CLENBQ2pDLElBQUksRUFDSixLQUFLLEVBQ0wsSUFBSSxFQUNKLEtBQUssRUFDTCxRQUFRLENBQ1gsQ0FBQztRQUVGLE1BQU0sYUFBYSxHQUFHLFVBQVUsQ0FBQyxTQUFTLENBQUMsMkJBQTJCLENBQUMsQ0FBQztRQUV4RSxNQUFNLGlCQUFpQixHQUFHLGFBQWEsQ0FBQyxTQUFTLENBQUMsb0JBQW9CLENBQUMsQ0FBQztRQUV4RSxpQkFBaUIsQ0FBQyxTQUFTLEdBQUcsT0FBTyxDQUFDO1FBRXRDLGVBQWUsQ0FBQyxXQUFXLENBQUMsVUFBVSxDQUFDLENBQUM7S0FDM0M7QUFDTCxDQUFDLENBQUMsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIlxyXG5pbXBvcnQgXCIuLi9hc3NldHMvbWFpbi5jc3NcIjtcclxuXHJcbmludGVyZmFjZSBEb21FbGVtZW50SW5mbyB7XHJcbiAgICAvKipcclxuICAgICAqIFRoZSBjbGFzcyB0byBiZSBhc3NpZ25lZC4gQ2FuIGJlIGEgc3BhY2Utc2VwYXJhdGVkIHN0cmluZyBvciBhbiBhcnJheSBvZiBzdHJpbmdzLlxyXG4gICAgICovXHJcbiAgICBjbHM/OiBzdHJpbmcgfCBzdHJpbmdbXTtcclxuICAgIC8qKlxyXG4gICAgICogVGhlIHRleHRDb250ZW50IHRvIGJlIGFzc2lnbmVkLlxyXG4gICAgICovXHJcbiAgICB0ZXh0Pzogc3RyaW5nO1xyXG4gICAgLyoqXHJcbiAgICAgKiBIVE1MIGF0dHJpYnV0ZXMgdG8gYmUgYWRkZWQuXHJcbiAgICAgKi9cclxuICAgIGF0dHI/OiB7XHJcbiAgICAgICAgW2tleTogc3RyaW5nXTogc3RyaW5nIHwgbnVtYmVyIHwgYm9vbGVhbiB8IG51bGw7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBIVE1MIHRpdGxlIChmb3IgaG92ZXIgdG9vbHRpcCkuXHJcbiAgICAgKi9cclxuICAgIHRpdGxlPzogc3RyaW5nO1xyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgcGFyZW50IGVsZW1lbnQgdG8gYmUgYXNzaWduZWQgdG8uXHJcbiAgICAgKi9cclxuICAgIHBhcmVudD86IE5vZGU7XHJcbiAgICB2YWx1ZT86IHN0cmluZztcclxuICAgIHR5cGU/OiBzdHJpbmc7XHJcbiAgICBwcmVwZW5kPzogYm9vbGVhbjtcclxuICAgIGhyZWY/OiBzdHJpbmc7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNyZWF0ZUVsPEsgZXh0ZW5kcyBrZXlvZiBIVE1MRWxlbWVudFRhZ05hbWVNYXA+KFxyXG4gICAgdGFnOiBLLFxyXG4gICAgdD86IHN0cmluZyB8IERvbUVsZW1lbnRJbmZvLFxyXG4gICAgZT86IEhUTUxFbGVtZW50XHJcbik6IEhUTUxFbGVtZW50VGFnTmFtZU1hcFtLXSB7XHJcbiAgICBjb25zdCBpID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCh0YWcpO1xyXG4gICAgXCJzdHJpbmdcIiA9PSB0eXBlb2YgdCAmJlxyXG4gICAgICAgICh0ID0ge1xyXG4gICAgICAgICAgICBjbHM6IHRcclxuICAgICAgICB9KTtcclxuICAgIGNvbnN0IHIgPSB0IHx8IHt9LFxyXG4gICAgICAgIG8gPSByLmNscyxcclxuICAgICAgICBzID0gci50ZXh0LFxyXG4gICAgICAgIGEgPSByLmF0dHIsXHJcbiAgICAgICAgbCA9IHIudGl0bGUsXHJcbiAgICAgICAgYyA9IHIudmFsdWUsXHJcbiAgICAgICAgdSA9IHIudHlwZSxcclxuICAgICAgICBoID0gZSA/IGUgOiByLnBhcmVudCxcclxuICAgICAgICBwID0gci5wcmVwZW5kLFxyXG4gICAgICAgIGQgPSByLmhyZWY7XHJcbiAgICByZXR1cm4gKFxyXG4gICAgICAgIG8gJiZcclxuICAgICAgICAgICAgKEFycmF5LmlzQXJyYXkobylcclxuICAgICAgICAgICAgICAgID8gKGkuY2xhc3NOYW1lID0gby5qb2luKFwiIFwiKSlcclxuICAgICAgICAgICAgICAgIDogKGkuY2xhc3NOYW1lID0gbykpLFxyXG4gICAgICAgIHMgJiYgKGkudGV4dENvbnRlbnQgPSBzKSxcclxuICAgICAgICBhICYmXHJcbiAgICAgICAgICAgIE9iamVjdC5rZXlzKGEpLmZvckVhY2goKHQpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG4gPSBhW3RdO1xyXG4gICAgICAgICAgICAgICAgbnVsbCAhPT0gbiAmJiBpLnNldEF0dHJpYnV0ZSh0LCBTdHJpbmcobikpO1xyXG4gICAgICAgICAgICB9KSxcclxuICAgICAgICBsICYmIChpLnRpdGxlID0gbCksXHJcbiAgICAgICAgYyAmJlxyXG4gICAgICAgICAgICAoaSBpbnN0YW5jZW9mIEhUTUxJbnB1dEVsZW1lbnQgfHxcclxuICAgICAgICAgICAgICAgIGkgaW5zdGFuY2VvZiBIVE1MU2VsZWN0RWxlbWVudCB8fFxyXG4gICAgICAgICAgICAgICAgaSBpbnN0YW5jZW9mIEhUTUxPcHRpb25FbGVtZW50KSAmJlxyXG4gICAgICAgICAgICAoaS52YWx1ZSA9IGMpLFxyXG4gICAgICAgIC8qIHUgJiYgaSBpbnN0YW5jZW9mIEhUTUxJbnB1dEVsZW1lbnQgJiYgKGkudHlwZSA9IHUpLCAqL1xyXG4gICAgICAgIHUgJiYgaSBpbnN0YW5jZW9mIEhUTUxTdHlsZUVsZW1lbnQgJiYgaS5zZXRBdHRyaWJ1dGUoXCJ0eXBlXCIsIHUpLFxyXG4gICAgICAgIGQgJiZcclxuICAgICAgICAgICAgKGkgaW5zdGFuY2VvZiBIVE1MQW5jaG9yRWxlbWVudCB8fCBpIGluc3RhbmNlb2YgSFRNTExpbmtFbGVtZW50KSAmJlxyXG4gICAgICAgICAgICAoaS5ocmVmID0gZCksXHJcbiAgICAgICAgaCAmJiAocCA/IGguaW5zZXJ0QmVmb3JlKGksIGguZmlyc3RDaGlsZCkgOiBoLmFwcGVuZENoaWxkKGkpKSxcclxuICAgICAgICBpXHJcbiAgICApO1xyXG59XHJcbi8vQHRzLWlnbm9yZS1saW5lXHJcbmNvbnN0IGNyZWF0ZURpdiA9IGZ1bmN0aW9uIChcclxuICAgIG8/OiBzdHJpbmcgfCBEb21FbGVtZW50SW5mbyxcclxuICAgIGU/OiBIVE1MRWxlbWVudFxyXG4pOiBIVE1MRGl2RWxlbWVudCB7XHJcbiAgICByZXR1cm4gY3JlYXRlRWwoXCJkaXZcIiwgbywgZSk7XHJcbn07XHJcblxyXG5Ob2RlLnByb3RvdHlwZS5jcmVhdGVEaXYgPSBmdW5jdGlvbiAoXHJcbiAgICBvPzogc3RyaW5nIHwgRG9tRWxlbWVudEluZm8sXHJcbiAgICBjYj86IChlbDogSFRNTERpdkVsZW1lbnQpID0+IHZvaWRcclxuKTogSFRNTERpdkVsZW1lbnQge1xyXG4gICAgcmV0dXJuIGNyZWF0ZURpdihvLCB0aGlzKTtcclxufTtcclxuTm9kZS5wcm90b3R5cGUuY3JlYXRlRWwgPSBmdW5jdGlvbiA8SyBleHRlbmRzIGtleW9mIEhUTUxFbGVtZW50VGFnTmFtZU1hcD4oXHJcbiAgICB0YWc6IEssXHJcbiAgICBvPzogc3RyaW5nIHwgRG9tRWxlbWVudEluZm8sXHJcbiAgICBjYj86IChlbDogSFRNTEVsZW1lbnRUYWdOYW1lTWFwW0tdKSA9PiB2b2lkXHJcbik6IEhUTUxFbGVtZW50VGFnTmFtZU1hcFtLXSB7XHJcbiAgICByZXR1cm4gY3JlYXRlRWwodGFnLCBvLCB0aGlzKTtcclxufTtcclxuXHJcbkVsZW1lbnQucHJvdG90eXBlLmFkZENsYXNzID0gZnVuY3Rpb24gKC4uLmFyZ3MpIHtcclxuICAgIGNvbnN0IGUgPSBbXTtcclxuICAgIGZvciAobGV0IHQgPSAwOyB0IDwgYXJncy5sZW5ndGg7IHQrKykgZVt0XSA9IGFyZ3NbdF07XHJcbiAgICB0aGlzLmFkZENsYXNzZXMoZSk7XHJcbn07XHJcblxyXG5FbGVtZW50LnByb3RvdHlwZS5hZGRDbGFzc2VzID0gZnVuY3Rpb24gKGUpIHtcclxuICAgIGZvciAobGV0IHQgPSAwOyB0IDwgZS5sZW5ndGg7IHQrKykgdGhpcy5jbGFzc0xpc3QuYWRkKGVbdF0pO1xyXG59O1xyXG5cclxuZnVuY3Rpb24gZ2V0QWRtb25pdGlvbkVsZW1lbnQoXHJcbiAgICB0eXBlOiBzdHJpbmcsXHJcbiAgICB0aXRsZTogc3RyaW5nLFxyXG4gICAgaWNvbjogc3RyaW5nLFxyXG4gICAgY29sb3I6IHN0cmluZyxcclxuICAgIGNvbGxhcHNlPzogc3RyaW5nLFxyXG4gICAgaWQ/OiBzdHJpbmdcclxuKTogSFRNTEVsZW1lbnQge1xyXG4gICAgbGV0IGFkbW9uaXRpb24sXHJcbiAgICAgICAgdGl0bGVFbCxcclxuICAgICAgICBhdHRyczogeyBzdHlsZTogc3RyaW5nOyBvcGVuPzogc3RyaW5nIH0gPSB7XHJcbiAgICAgICAgICAgIHN0eWxlOiBgLS1hZG1vbml0aW9uLWNvbG9yOiAke2NvbG9yfTtgXHJcbiAgICAgICAgfTtcclxuICAgIGlmIChjb2xsYXBzZSAmJiBjb2xsYXBzZSAhPSBcIm5vbmVcIikge1xyXG4gICAgICAgIGlmIChjb2xsYXBzZSA9PT0gXCJvcGVuXCIpIHtcclxuICAgICAgICAgICAgYXR0cnMub3BlbiA9IFwib3BlblwiO1xyXG4gICAgICAgIH1cclxuICAgICAgICBhZG1vbml0aW9uID0gY3JlYXRlRWwoXCJkZXRhaWxzXCIsIHtcclxuICAgICAgICAgICAgY2xzOiBgYWRtb25pdGlvbiBhZG1vbml0aW9uLSR7dHlwZX0gYWRtb25pdGlvbi1wbHVnaW5gLFxyXG4gICAgICAgICAgICBhdHRyOiBhdHRyc1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRpdGxlRWwgPSBhZG1vbml0aW9uLmNyZWF0ZUVsKFwic3VtbWFyeVwiLCB7XHJcbiAgICAgICAgICAgIGNsczogYGFkbW9uaXRpb24tdGl0bGUgJHshdGl0bGU/LnRyaW0oKS5sZW5ndGggPyBcIm5vLXRpdGxlXCIgOiBcIlwifWBcclxuICAgICAgICB9KTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgYWRtb25pdGlvbiA9IGNyZWF0ZURpdih7XHJcbiAgICAgICAgICAgIGNsczogYGFkbW9uaXRpb24gYWRtb25pdGlvbi0ke3R5cGV9IGFkbW9uaXRpb24tcGx1Z2luYCxcclxuICAgICAgICAgICAgYXR0cjogYXR0cnNcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aXRsZUVsID0gYWRtb25pdGlvbi5jcmVhdGVEaXYoe1xyXG4gICAgICAgICAgICBjbHM6IGBhZG1vbml0aW9uLXRpdGxlICR7IXRpdGxlPy50cmltKCkubGVuZ3RoID8gXCJuby10aXRsZVwiIDogXCJcIn1gXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGlkKSB7XHJcbiAgICAgICAgYWRtb25pdGlvbi5pZCA9IGlkO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICh0aXRsZSAmJiB0aXRsZS50cmltKCkubGVuZ3RoKSB7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogVGl0bGUgc3RydWN0dXJlXHJcbiAgICAgICAgICogPGRpdnxzdW1tYXJ5Pi5hZG1vbml0aW9uLXRpdGxlXHJcbiAgICAgICAgICogICAgICA8ZWxlbWVudD4uYWRtb25pdGlvbi10aXRsZS1jb250ZW50IC0gUmVuZGVyZWQgTWFya2Rvd24gdG9wLWxldmVsIGVsZW1lbnQgKGUuZy4gSDEvMi8zIGV0YywgcClcclxuICAgICAgICAgKiAgICAgICAgICBkaXYuYWRtb25pdGlvbi10aXRsZS1pY29uXHJcbiAgICAgICAgICogICAgICAgICAgICAgIHN2Z1xyXG4gICAgICAgICAqICAgICAgICAgIGRpdi5hZG1vbml0aW9uLXRpdGxlLW1hcmtkb3duIC0gQ29udGFpbmVyIG9mIHJlbmRlcmVkIG1hcmtkb3duXHJcbiAgICAgICAgICogICAgICAgICAgICAgIC4uLnJlbmRlcmVkIG1hcmtkb3duIGNoaWxkcmVuLi4uXHJcbiAgICAgICAgICovXHJcblxyXG4gICAgICAgIC8vZ2V0IG1hcmtkb3duXHJcbiAgICAgICAgY29uc3QgbWFya2Rvd25Ib2xkZXIgPSBjcmVhdGVEaXYoKTtcclxuICAgICAgICAvL01hcmtkb3duUmVuZGVyZXIucmVuZGVyTWFya2Rvd24odGl0bGUsIG1hcmtkb3duSG9sZGVyLCBcIlwiLCBudWxsKTtcclxuXHJcbiAgICAgICAgLy9hZG1vbml0aW9uLXRpdGxlLWNvbnRlbnQgaXMgZmlyc3QgY2hpbGQgb2YgcmVuZGVyZWQgbWFya2Rvd25cclxuXHJcbiAgICAgICAgY29uc3QgYWRtb25pdGlvblRpdGxlQ29udGVudCA9XHJcbiAgICAgICAgICAgIC8qIG1hcmtkb3duSG9sZGVyPy5jaGlsZHJlblswXT8udGFnTmFtZSA9PT0gXCJQXCJcclxuICAgICAgICA/IGNyZWF0ZURpdigpXHJcbiAgICAgICAgOiBtYXJrZG93bkhvbGRlci5jaGlsZHJlblswXSA/PyAgKi8gY3JlYXRlRGl2KCk7XHJcblxyXG5cclxuICAgICAgICAvL2dldCBjaGlsZHJlbiBvZiBtYXJrZG93biBlbGVtZW50LCB0aGVuIHJlbW92ZSB0aGVtXHJcbiAgICAgICAgY29uc3QgbWFya2Rvd25FbGVtZW50cyA9IEFycmF5LmZyb20oXHJcbiAgICAgICAgICAgIG1hcmtkb3duSG9sZGVyLmNoaWxkcmVuWzBdPy5jaGlsZE5vZGVzIHx8IFtdXHJcbiAgICAgICAgKTtcclxuICAgICAgICBhZG1vbml0aW9uVGl0bGVDb250ZW50LmlubmVySFRNTCA9IFwiXCI7XHJcbiAgICAgICAgYWRtb25pdGlvblRpdGxlQ29udGVudC5hZGRDbGFzcyhcImFkbW9uaXRpb24tdGl0bGUtY29udGVudFwiKTtcclxuXHJcbiAgICAgICAgLy9idWlsZCBpY29uIGVsZW1lbnRcclxuICAgICAgICBjb25zdCBpY29uRWwgPSBhZG1vbml0aW9uVGl0bGVDb250ZW50LmNyZWF0ZURpdihcclxuICAgICAgICAgICAgXCJhZG1vbml0aW9uLXRpdGxlLWljb25cIlxyXG4gICAgICAgICk7XHJcbiAgICAgICAgaWYgKGljb24pIHtcclxuICAgICAgICAgICAgaWNvbkVsLmlubmVySFRNTCA9IGljb247XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvL2FkZCBtYXJrZG93biBjaGlsZHJlbiBiYWNrXHJcbiAgICAgICAgY29uc3QgYWRtb25pdGlvblRpdGxlTWFya2Rvd24gPSBhZG1vbml0aW9uVGl0bGVDb250ZW50LmNyZWF0ZURpdihcclxuICAgICAgICAgICAgXCJhZG1vbml0aW9uLXRpdGxlLW1hcmtkb3duXCJcclxuICAgICAgICApO1xyXG4gICAgICAgIGFkbW9uaXRpb25UaXRsZU1hcmtkb3duLmlubmVyVGV4dCA9IHRpdGxlO1xyXG4gICAgICAgIC8qIGZvciAobGV0IGkgPSAwOyBpIDwgbWFya2Rvd25FbGVtZW50cy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBhZG1vbml0aW9uVGl0bGVNYXJrZG93bi5hcHBlbmRDaGlsZChtYXJrZG93bkVsZW1lbnRzW2ldKTtcclxuICAgICAgICB9ICovXHJcbiAgICAgICAgdGl0bGVFbC5hcHBlbmRDaGlsZChhZG1vbml0aW9uVGl0bGVDb250ZW50IHx8IGNyZWF0ZURpdigpKTtcclxuICAgIH1cclxuXHJcbiAgICAvL2FkZCB0aGVtIHRvIHRpdGxlIGVsZW1lbnRcclxuXHJcbiAgICBpZiAoY29sbGFwc2UpIHtcclxuICAgICAgICB0aXRsZUVsLmNyZWF0ZURpdihcImNvbGxhcHNlclwiKS5jcmVhdGVEaXYoXCJoYW5kbGVcIik7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gYWRtb25pdGlvbjtcclxufVxyXG5mdW5jdGlvbiBzdGFydHNXaXRoQW55KHN0cjogc3RyaW5nLCBuZWVkbGVzOiBzdHJpbmdbXSkge1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBuZWVkbGVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgaWYgKHN0ci5zdGFydHNXaXRoKG5lZWRsZXNbaV0pKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gZmFsc2U7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdldFBhcmFtZXRlcnNGcm9tU291cmNlKHR5cGU6IHN0cmluZywgc3JjOiBzdHJpbmcpIHtcclxuICAgIGNvbnN0IGtleXdvcmRUb2tlbnMgPSBbXCJ0aXRsZTpcIiwgXCJjb2xsYXBzZTpcIiwgXCJpY29uOlwiLCBcImNvbG9yOlwiXTtcclxuXHJcbiAgICBjb25zdCBrZXl3b3JkcyA9IFtcInRpdGxlXCIsIFwiY29sbGFwc2VcIiwgXCJpY29uXCIsIFwiY29sb3JcIl07XHJcblxyXG4gICAgbGV0IGxpbmVzID0gc3JjLnNwbGl0KFwiXFxuXCIpO1xyXG5cclxuICAgIGxldCBza2lwTGluZXMgPSAwO1xyXG5cclxuICAgIGxldCBwYXJhbXM6IHsgW2s6IHN0cmluZ106IHN0cmluZyB9ID0ge307XHJcblxyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsaW5lcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIGxldCBrZXl3b3JkSW5kZXggPSBzdGFydHNXaXRoQW55KGxpbmVzW2ldLCBrZXl3b3JkVG9rZW5zKTtcclxuXHJcbiAgICAgICAgaWYgKGtleXdvcmRJbmRleCA9PT0gZmFsc2UpIHtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgZm91bmRLZXl3b3JkID0ga2V5d29yZHNba2V5d29yZEluZGV4XTtcclxuXHJcbiAgICAgICAgaWYgKHBhcmFtc1tmb3VuZEtleXdvcmRdICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwYXJhbXNbZm91bmRLZXl3b3JkXSA9IGxpbmVzW2ldXHJcbiAgICAgICAgICAgIC5zdWJzdHIoa2V5d29yZFRva2Vuc1trZXl3b3JkSW5kZXhdLmxlbmd0aClcclxuICAgICAgICAgICAgLnRyaW0oKTtcclxuICAgICAgICArK3NraXBMaW5lcztcclxuICAgIH1cclxuXHJcbiAgICBsZXQge1xyXG4gICAgICAgIHRpdGxlID0gdHlwZVswXS50b1VwcGVyQ2FzZSgpICsgdHlwZS5zbGljZSgxKS50b0xvd2VyQ2FzZSgpLFxyXG4gICAgICAgIGNvbGxhcHNlLFxyXG4gICAgICAgIGljb24sXHJcbiAgICAgICAgY29sb3JcclxuICAgIH0gPSBwYXJhbXM7XHJcblxyXG4gICAgbGV0IGNvbnRlbnQgPSBsaW5lcy5zbGljZShza2lwTGluZXMpLmpvaW4oXCJcXG5cIik7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBJZiB0aGUgYWRtb25pdGlvbiBzaG91bGQgY29sbGFwc2UsIGJ1dCBzb21ldGhpbmcgb3RoZXIgdGhhbiBvcGVuIG9yIGNsb3NlZCB3YXMgcHJvdmlkZWQsIHNldCB0byBjbG9zZWQuXHJcbiAgICAgKi9cclxuICAgIGlmIChcclxuICAgICAgICBjb2xsYXBzZSAhPT0gdW5kZWZpbmVkICYmXHJcbiAgICAgICAgY29sbGFwc2UgIT09IFwibm9uZVwiICYmXHJcbiAgICAgICAgY29sbGFwc2UgIT09IFwib3BlblwiICYmXHJcbiAgICAgICAgY29sbGFwc2UgIT09IFwiY2xvc2VkXCJcclxuICAgICkge1xyXG4gICAgICAgIGNvbGxhcHNlID0gXCJjbG9zZWRcIjtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIElmIHRoZSBhZG1vbml0aW9uIHNob3VsZCBjb2xsYXBzZSwgYnV0IHRpdGxlIHdhcyBibGFua2VkLCBzZXQgdGhlIGRlZmF1bHQgdGl0bGUuXHJcbiAgICAgKi9cclxuICAgIGlmICh0aXRsZS50cmltKCkgPT09IFwiXCIgJiYgY29sbGFwc2UgIT09IHVuZGVmaW5lZCAmJiBjb2xsYXBzZSAhPT0gXCJub25lXCIpIHtcclxuICAgICAgICB0aXRsZSA9IHR5cGVbMF0udG9VcHBlckNhc2UoKSArIHR5cGUuc2xpY2UoMSkudG9Mb3dlckNhc2UoKTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHsgdGl0bGUsIGNvbGxhcHNlLCBjb250ZW50LCBpY29uLCBjb2xvciB9O1xyXG59XHJcblxyXG5pbnRlcmZhY2UgQWRtb25pdGlvblB1Ymxpc2hEZWZpbml0aW9uIHtcclxuICAgIGljb246IHN0cmluZztcclxuICAgIGNvbG9yOiBzdHJpbmc7XHJcbn1cclxuXHJcbmNvbnN0IEFETU9OSVRJT05fSUNPTl9NQVA6IHsgW2FkbW9uaXRpb25UeXBlOiBzdHJpbmddOiBBZG1vbml0aW9uUHVibGlzaERlZmluaXRpb24gfSA9IHt9O1xyXG5cclxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIkRPTUNvbnRlbnRMb2FkZWRcIiwgZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAvL2RvIHdvcmtcclxuXHJcbiAgICBjb25zdCBhZG1vbml0aW9ucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXHJcbiAgICAgICAgXCJwcmVbY2xhc3NePSdsYW5ndWFnZS1hZCddXCJcclxuICAgICkgYXMgTm9kZUxpc3RPZjxIVE1MUHJlRWxlbWVudD47XHJcblxyXG4gICAgaWYgKCFhZG1vbml0aW9ucy5sZW5ndGgpIHJldHVybjtcclxuXHJcbiAgICBmb3IgKGxldCBhZG1vbml0aW9uQmxvY2sgb2YgQXJyYXkuZnJvbShhZG1vbml0aW9ucykpIHtcclxuXHJcbiAgICAgICAgY29uc3QgWywgdHlwZV0gPSBhZG1vbml0aW9uQmxvY2suY2xhc3NMaXN0LnRvU3RyaW5nKCkubWF0Y2goL2xhbmd1YWdlLWFkLShcXHcrKS8pO1xyXG4gICAgICAgIGlmICghdHlwZSkgY29udGludWU7XHJcbiAgICAgICAgaWYgKCEodHlwZSBpbiBBRE1PTklUSU9OX0lDT05fTUFQKSkgY29udGludWU7XHJcblxyXG4gICAgICAgIGxldCB7XHJcbiAgICAgICAgICAgIHRpdGxlID0gdHlwZVswXS50b1VwcGVyQ2FzZSgpICsgdHlwZS5zbGljZSgxKS50b0xvd2VyQ2FzZSgpLFxyXG4gICAgICAgICAgICBjb2xsYXBzZSxcclxuICAgICAgICAgICAgY29udGVudCxcclxuICAgICAgICAgICAgaWNvbiA9IEFETU9OSVRJT05fSUNPTl9NQVBbdHlwZV0uaWNvbixcclxuICAgICAgICAgICAgY29sb3IgPSBBRE1PTklUSU9OX0lDT05fTUFQW3R5cGVdLmNvbG9yLFxyXG4gICAgICAgIH0gPSBnZXRQYXJhbWV0ZXJzRnJvbVNvdXJjZSh0eXBlLCBhZG1vbml0aW9uQmxvY2suaW5uZXJUZXh0KTtcclxuXHJcbiAgICAgICAgbGV0IGFkbW9uaXRpb24gPSBnZXRBZG1vbml0aW9uRWxlbWVudChcclxuICAgICAgICAgICAgdHlwZSxcclxuICAgICAgICAgICAgdGl0bGUsXHJcbiAgICAgICAgICAgIGljb24sXHJcbiAgICAgICAgICAgIGNvbG9yLFxyXG4gICAgICAgICAgICBjb2xsYXBzZVxyXG4gICAgICAgICk7XHJcblxyXG4gICAgICAgIGNvbnN0IGNvbnRlbnRIb2xkZXIgPSBhZG1vbml0aW9uLmNyZWF0ZURpdihcImFkbW9uaXRpb24tY29udGVudC1ob2xkZXJcIik7XHJcblxyXG4gICAgICAgIGNvbnN0IGFkbW9uaXRpb25Db250ZW50ID0gY29udGVudEhvbGRlci5jcmVhdGVEaXYoXCJhZG1vbml0aW9uLWNvbnRlbnRcIik7XHJcblxyXG4gICAgICAgIGFkbW9uaXRpb25Db250ZW50LmlubmVyVGV4dCA9IGNvbnRlbnQ7XHJcblxyXG4gICAgICAgIGFkbW9uaXRpb25CbG9jay5yZXBsYWNlV2l0aChhZG1vbml0aW9uKTtcclxuICAgIH1cclxufSk7XHJcbiJdfQ==
/******/ 	return __webpack_exports__;
/******/ })()
;
});